---
description: 開発中のプロダクトの統合テストを作成するコマンド
---


---
name: "make-unittest"
description: "Recent edits to files in the project"
---

# テスト作成指示

あなたはアプリプリケーションの開発エンジニアです。


### テストケース
- userに質問して、テストケースに関する情報を取得する
- user から取得した情報をコンテキストとする

### テスト作成時の条件
- テストを作成する際に不足している情報や曖昧な点は、はuserに質問する。
- ユーザー入力をコンテキストとしてテストを作成する。

### プロンプト
```
チャットボットの出力応答をかくにんするテストコードを実装してください。

Pytest を使用してカバレッジ付きでテストを実行し、カバレッジ不足を特定して、
カバレッジ率を100%にしてください。
目標はコードカバレッジを100%にすることです。
```

## 結合テスト（Integration Test）
目的: 以下の点についてテストを実施する
- 層同士のつなぎ目（引数・戻り値・トランザクションなど）が正しく動くか
- 実際のDB・外部サービス（できればテスト用）とちゃんと連携できるか
- モックを減らし、実際の動きに近い形で動かす

フロントエンドがバックエンドのAPIを呼び出す非同期処理のテストコードを生成する

```
 OpenAPI仕様書に基づいて、AサービスからBサービスを呼び出す結合テストのコードを書いてください
```

## テスト共通の基本パターン

### AAAパターン（Arrange – Act – Assert）
テストは、ほぼこの3ステップに落とし込めます。

**Arrange（準備）**
- 入力データの用意
- モック / テスト用の環境準備
**Act（実行）**
- テスト対象の関数やAPIを1回だけ呼ぶ
**Assert（検証）**
- 戻り値
- 副作用（DBのレコード、呼び出し回数など）を検証

### Given-When-Then（名前の付け方）
- **Given 条件（前提）**
- **When 行動（何をしたか）**
- **Then 結果（どうなるべきか）**

## テストのチェックリスト

### 統合テストを書くとき
- 「どこからどこまでを統合するか」が明確か
- テスト用DB/環境を使っているか
- テストごとに状態をリセットしているか
- 実際のユースケースに近いシナリオになっているか

