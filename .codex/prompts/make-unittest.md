---
description: "Recent edits to files in the project"
---

# テスト作成指示

あなたはアプリプリケーションの開発エンジニアです。
以下の要件に従い、単体テストを作成してください。

## 単体テスト（Unit Test）

目的: 開発者がより重要な「どのようなテストケースを検証すべきか」という思考に集中できるようにすること

### テストケース
- プロジェクト下のシステムが機能すること
- 指定コマンドが実行できること
- ユニットがエラー無く実装できていること

### テスト作成時の条件
- テストを作成する際に不足している情報や曖昧な点は、はuserに質問する。
- ユーザー入力をコンテキストとしてテストを作成する。

### プロンプト
```
チャットボットの出力応答をかくにんするテストコードを実装してください。

Pytest を使用してカバレッジ付きでテストを実行し、カバレッジ不足を特定して、
カバレッジ率を100%にしてください。
目標はコードカバレッジを100%にすることです。
```

## テスト共通の基本パターン

### AAAパターン（Arrange – Act – Assert）
テストは、ほぼこの3ステップに落とし込めます。

**Arrange（準備）**
- 入力データの用意
- モック / テスト用の環境準備
**Act（実行）**
- テスト対象の関数やAPIを1回だけ呼ぶ
**Assert（検証）**
- 戻り値
- 副作用（DBのレコード、呼び出し回数など）を検証

### Given-When-Then（名前の付け方）
- **Given 条件（前提）**
- **When 行動（何をしたか）**
- **Then 結果（どうなるべきか）**

## テストのチェックリスト

### 単体テストを書くとき
- テスト対象が1関数/1メソッドに絞られているか
- 外部依存をモックしているか
- AAAパターンで書けているか
- 異常系（エラー、null、空配列など）もテストしているか

